@if(error){
<div class="container">
  <p-message severity="warn">{{ error }}</p-message>
  <button pButton severity="success" [routerLink]="''">Home</button>
</div>
} @else {
<div class="resultados">
  <button pButton severity="success" [routerLink]="''">Home</button>
  <h1 *ngIf="nombre">{{ nombre }}</h1>
  <div class="card">
    <p-tabs value="0">
      <p-tablist>
        <p-tab value="0">Tablas</p-tab>
        <p-tab value="1">Gráficos</p-tab>
      </p-tablist>
      <p-tabpanels>
        <p-tabpanel value="0">
          <app-tabla-resultados
            [preguntas]="preguntas"
            [respuestas]="respuestas"
          ></app-tabla-resultados>
        </p-tabpanel>
        <p-tabpanel value="1">
          <p-card *ngFor="let pregunta of preguntas">
            <p-fieldset legend="Pregunta {{ pregunta.numero + 1 }}">
              <p-accordion [activeIndex]="0">
                <p-accordionTab header="{{ pregunta.texto }}">
                  <div class="p-card-content">
                    <!-- Pregunta abierta -->
                    <div *ngIf="pregunta.tipo === 'ABIERTA'">
                      <p-scrollPanel
                        [style]="{ width: '100%', height: '150px' }"
                      >
                        <p
                          *ngFor="let respuesta of pregunta.respuestasAbiertas"
                        >
                          {{ respuesta.texto }}
                        </p>
                      </p-scrollPanel>
                    </div>

                    <!-- Selección simple -->
                    <div
                      *ngIf="
                        pregunta.tipo === 'OPCION_MULTIPLE_SELECCION_SIMPLE'
                      "
                    >
                      <div class="flex justify-content-center">
                        <p-chart
                          type="doughnut"
                          [data]="getData(pregunta)"
                          [options]="options"
                        />
                      </div>
                    </div>

                    <!-- Selección múltiple -->
                    <div
                      *ngIf="
                        pregunta.tipo === 'OPCION_MULTIPLE_SELECCION_MULTIPLE'
                      "
                    >
                      <p-chart
                        type="bar"
                        [data]="getData(pregunta)"
                        [options]="options"
                      />
                    </div>
                  </div>
                </p-accordionTab>
              </p-accordion>
            </p-fieldset>
          </p-card>
        </p-tabpanel>
      </p-tabpanels>
    </p-tabs>
  </div>
</div>
}
